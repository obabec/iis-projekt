<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
		img {width: 500px; height: 500px;}
    </style>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

<h1>2. Knihovna: vyhledávání, rezervace, pùjèování a objednávání knih</h1>

<dl>
	<dt>Autoøi</dt>
	<dd>Ondøej Babec
	    <a href="mailto:xbabec00@stud.fit.vutbr.cz">xbabec00@stud.fit.vutbr.cz</a> -
		Iniciální struktura systému, základní struktura pohledù, implementace controllerù a datových modelù
	</dd>
	<dd>Tomá¹ Korbaø
	    <a href="mailto:xkorba02@stud.fit.vutbr.cz">xkorba02@stud.fit.vutbr.cz</a> -
		Databátové schéma, implementace controllerù a datových modelù
	</dd>
 	 <dd>Ladislav Dokoupil
	    <a href="mailto:xdokou14@stud.fit.vutbr.cz">xdokou14@stud.fit.vutbr.cz</a> -
		Tvorba a stylování HTML stránek
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="http://37.205.11.180:8080">http://37.205.11.180:8080/</a></dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>
<table>
<tbody><tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin</td><td>adminHeslo.</td><td>Administrátor</td></tr>
<tr><td>distributor</td><td>distribHeslo.</td><td>Distributor</td></tr>
<tr><td>libr</td><td>librHeslo1</td><td>Knihovník1</td></tr>
<tr><td>libr2</td><td>librHeslo2</td><td>Knihovník2</td></tr>
<tr><td>reader</td><td>readerHeslo.</td><td>Ètenáø</td></tr>
</tbody></table>

<h2>Implementace</h2>
<p>
	Informaèní systém knihovny implementován za pou¾ití jazyka <i>Java</i> spoleènì s frameworkem <i>Spring-boot</i>
	a ¹ablonovacího jazyka <i>Thymeleaf</i>, databáze je realizována pomocí relaèní databáze <i>PostgreSQL</i>.
	Celý systém je distribuován na platformì <i>Docker</i> a jeho instalace je realizována pomocí programu
	<i>Docker-compose</i>. Systém je navr¾en pomocí návrhového vzoru <i>MVC</i>, tudí¾ je celá funkcionalita
	rozdìlena mezi jednotlivé controllery:

<dl>
	<dd>AuthorController - správa autorù knih distributory</dd>
	<dd>LibraryController - správá knihoven administrátorem</dd>
	<dd>OrderController - tvorba objednávek titulù knihovníky a jejich výøízení distributory</dd>
	<dd>TitleController - tvorba titulù distributory a jejich objednání knihovníky</dd>
	<dd>BookController - pøídání/správa knih vlastní knihovny pro knihovníky</dd>
	<dd>LoanController - manuální správá výpujèek knihovníkem</dd>
	<dd>RegisterController - registrace do systému</dd>
	<dd>UserController - správa u¾ivatelù a jejich oprávnìní administrátorem</dd>
	<dd>HomeController - vyhledáváni knih k objednání ètenáøi</dd>
	<dd>LoginController - autentizace do systému</dd>
	<dd>ReservationController - tvorba rezervací ètenáøi a jejich správá knihovníkem</dd>
	<dd>VoteController - hlasování k dokoupení knih ètenáøi a jejich odstranìní (po vyøízení) knihovníkem</dd>
	<dd>Security - definuje pøistupová práva rolí k daným stránkám/akcím</dd>
</dl>
	Tyto controllery provádí integraèní kontroly a plní pohledy daty. Pohledy jsou umístìny v adresáøi
	<i>src/main/resources/templates</i>.

</p>

<h3>Databáze</h3>
<img src="db.png" alt="database scheme">


<h2>Pou¾ítí</h2>

	<h3>Prerekvizity</h3>
	<ul>
		<li>docker</li>
		<li>docker-compose</li>
		<li>java-11</li>
		<li>maven >= 3.6</li>
	</ul>

	<h3>Konfigurace</h3>
	<p>
		Jediná konfigurace, kterou systém umo¾nòuje je iniciální nastavení databáze, to je provádìno
		pomocí inicializaèního scriptu databáze, který se v na¹em pøípadì nachází v <i>docker/db/db_dump.sql</i>.
		Ve¹keré úpravy, které jsou zde provedeny jsou následnì nasazeny pøi nasazování systému.
		Zde je dùle¾ité vìdìt, ¾e pokud chceme, aby se zmìny v tomto scriptu projevily musíme nejprve smazat
		ji¾ vytvoøené docker obrazy. Toho mù¾eme dosáhnout pomocí spu¹tìní scriptu <i>docker/start_docker.sh -k</i>.
		Mimo tuto konfiguraci je mo¾né pouze upravovat vlastnosti takzvaného <i>docker stacku</i> a to v jeho popisu
		souboru <i>docker/docker-compose.yml</i>
	</p>

	<h3>Instalace</h3>
	<p>
		Instalace/nasazení systému je realizováno pomocí programu <i>Docker-compose</i>, pro zjednodu¹ení práce
		je takté¾ pøítomen script, který tvoøí nádstavbu nad tímto programem speciálnì pro u¾ití toho informaèního
		systému.
	</p>
		<h4>Pou¾ití scriptu:</h4>
		<ul>
			<li><i>./docker/start_docker.sh -a</i> spustí informaèní systém na popøedí (ve¹keré logy systému budou plnit okno terminálu)</li>
			<li><i>./docker/start_docker.sh -d</i> spustí informaèní systém na pozadí</li>
			<li><i>./docker/start_docker.sh -k</i> zastaví systém a sma¾e ve¹keré doèasné soubory a obrazy v dockeru</li>
		</ul>
</body>
</html>